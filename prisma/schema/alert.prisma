enum AlertKind {
  CO2
  OCCUPANCY_MAX
  OCCUPANCY_UNEXPECTED
}

model Alert {
  id         String    @id @default(uuid())
  spaceId    String    @map("space_id")
  kind       AlertKind
  startedAt  DateTime  @map("started_at")
  resolvedAt DateTime? @map("resolved_at")
  metaJson   Json      @map("meta_json")
  createdAt  DateTime  @default(now()) @map("created_at")

  space Space @relation(fields: [spaceId], references: [id])

  @@index([spaceId, kind, resolvedAt])
  @@index([resolvedAt])
  @@map("alerts")
}
